<!doctype html>
<html lang='en'>
<head>
    <meta charset='utf-8'>
    <title>Cast HLS/M3U8</title>
    <meta name='description' content='Cast live streams / IPTV to your chromecast.'>
    <meta name='viewport' content='height=device-height, initial-scale=1.0'>
    <meta name='mobile-web-app-capable' content='yes'>
    <meta name='application-name' content='Cast HLS/IPTV video streams'>
    <meta name='theme-color' content='#000000'>
    <meta name='apple-mobile-web-app-capable' content='yes'>
    <meta name='apple-mobile-web-app-status-bar-style' content='black-translucent'>
    <meta name='apple-mobile-web-app-title' content='Cast HLS/IPTV video streams'>
    <link rel='shortcut icon' href='./static/img/castIcon_128.png'>
    <link rel='icon' href='./static/img/castIcon_128.png' type='image/x-icon'>
    <script src='https://www.gstatic.com/cv/js/sender/v1/cast_sender.js'></script>
    <script src='./static/js/player.chromecast.min.js'></script>
</head>
<body>
    <header>
        <h1>Live stream / network media player for Chromecast</h1>
    </header>
    <div id='app'>
        <h4>1. Launch Chromecast session</h4>
        <button class="btn" onclick="launchApp()">Launch session</button>
        <h4>2. Load network stream</h4>
        Enter stream URL (click to select predefined):
        <a onclick='setLivestream(0);return false;' href='#'>[ARD]</a> -
        <a onclick='setLivestream(1);return false;' href='#'>[Sportschau]</a> -
        <a onclick='setLivestream(2);return false;' href='#'>[ZDF]</a> -
        <a onclick='setLivestream(3);return false;' href='#'>[SAT1]</a><br>
        <input type="text" onkeyup="guessMimeType(this.value);" style="width:500px;" name="networkStreamUrl" value="" size="70" id="networkStreamUrl" placeholder="Network stream URL, eg. http://sub.domain.tld:port/path/file.ext"><br><br>
        Choose media type (cast-only, not required for browser playback):<br>
        <select name="mediaMimeType" id="mediaMimeType" style="width:500px;">
            <option value="application/vnd.apple.mpegurl">application/vnd.apple.mpegurl (HTTP-Live-Streaming, m3u8 playlists)</option>
            <option value="video/mp4">video/mp4 (raw mp4/mkv video files)</option>
            <option value="audio/mpeg">audio/mpeg (raw mp3 audio files)</option>
        </select>
        <h4>3. Choose playback method</h4>
        <button type="submit" name="loadCustomMedia" class="btn" onclick="loadCustomMedia();">Cast to device</button> or, alternatively,
        <button type="submit" name="playCustomMedia" class="btn" onclick="playCustomMedia();">play in browser</button>
        <h4>4. Control playback</h4>
        <pre id="debugmessage">
    Player state:    <span id="playerstate">IDLE</span>
    Media position:  <span id="progress_tick">00:00:00</span>
    Media duration:  <span id="duration">00:00:00</span>
    Progress bar:    <input id="progress" type="range" min="1" max="100" value="0.1" step="0.1" onmouseup="seekMedia(this.value);">
    Volume bar:      <input id="volumething" type="range" min="0" max="100" step="1" onmouseup="setReceiverVolume(this.value/100,false);">
    Volume mute:     <a href="#" id="mutelink" onclick="setReceiverVolume(currentVolume, true);this.style.display = 'none';document.getElementById('unmutelink').style.display = 'initial';return false; ">Mute</a><a href="#" style="display:none;" id="unmutelink" onclick="setReceiverVolume(currentVolume, false);this.style.display = 'none';document.getElementById('mutelink').style.display = 'initial';return false; ">Unmute</a>
    Control media:   <a href="#" onclick="playMedia();return false; " id="playpauseresume" >Play</a> - <a href="#" onclick="stopMedia();return false; ">Unload media</a>
    Control session: <a href="#" onclick="launchApp();return false; ">Start session</a> - <a href="#" onclick="stopApp();return false; ">Exit session</a>
        </pre>
    </div>
    <p><strong>NOTE</strong>: Chromecast follows the <a href="http://en.wikipedia.org/wiki/Same_origin_policy" target='_blank'>Same-origin policy</a>. Meaning: Chromecast will <b>not</b> play any network media files, unless the streaming server properly supports CORS for <strong>all</strong> requests (using <code>*</code>).<br></p>
    <script>
        (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
            (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
        })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
        ga('create', 'UA-57728344-1', 'auto');
        ga('send', 'pageview');
    </script>
    <!-- Based on: https://pwnt.dk/tools/chromecast.php -->
</body>
</html>
